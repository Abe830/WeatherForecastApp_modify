<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>都道府県タイピングゲーム</title>
    <style>
        body {
            font-family: 'Segoe UI', 'Meiryo', sans-serif;
            background: #f0f8ff;
            text-align: center;
        }

        .container {
            max-width: 500px;
            margin: 40px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 12px #007acc22;
            padding: 32px 24px;
        }

        .question {
            font-size: 2em;
            margin: 32px 0 24px 0;
            letter-spacing: 0.2em;
            color: #007acc;
        }

        input[type="text"] {
            font-size: 1.3em;
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid #aaa;
            width: 80%;
            margin-bottom: 16px;
        }

        .score {
            font-size: 1.1em;
            margin: 16px 0;
        }

        .result {
            font-size: 1.2em;
            margin: 24px 0;
            color: #e67e22;
        }

        button {
            padding: 10px 28px;
            font-size: 1.1em;
            border-radius: 8px;
            background: #007acc;
            color: #fff;
            border: none;
            cursor: pointer;
            margin-top: 18px;
        }

        button:active {
            background: #005b99;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>都道府県タイピングゲーム</h1>
        <div class="score" id="score">スコア: 0 / 0</div>
        <div class="question" id="question">---</div>
        <input type="text" id="answer" autocomplete="off" placeholder="ここに入力...">
        <div class="result" id="result"></div>
        <button id="restart" style="display:none;">もう一度</button>
    </div>
    <script>
        const prefs = [
            '北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県',
            '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県',
            '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県'
        ];
        let quiz = [];
        let current = 0;
        let score = 0;
        const question = document.getElementById('question');
        const answer = document.getElementById('answer');
        const result = document.getElementById('result');
        const scoreDiv = document.getElementById('score');
        const restartBtn = document.getElementById('restart');

        function shuffle(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }

        function startGame() {
            quiz = prefs.slice();
            shuffle(quiz);
            current = 0;
            score = 0;
            scoreDiv.textContent = `スコア: 0 / ${quiz.length}`;
            result.textContent = '';
            restartBtn.style.display = 'none';
            answer.value = '';
            answer.disabled = false;
            showQuestion();
        }

        function showQuestion() {
            if (current < quiz.length) {
                question.textContent = quiz[current];
                answer.value = '';
                answer.focus();
            } else {
                question.textContent = '終了！';
                result.textContent = `全問クリア！スコア: ${score} / ${quiz.length}`;
                answer.disabled = true;
                restartBtn.style.display = 'inline-block';
            }
        }

        answer.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' && !answer.disabled) {
                if (answer.value.trim() === quiz[current]) {
                    score++;
                    result.textContent = '正解！';
                } else {
                    result.textContent = `不正解... 正: ${quiz[current]}`;
                }
                current++;
                scoreDiv.textContent = `スコア: ${score} / ${quiz.length}`;
                setTimeout(() => {
                    result.textContent = '';
                    showQuestion();
                }, 800);
            }
        });

        restartBtn.addEventListener('click', startGame);
        window.onload = startGame;
    </script>
</body>

</html>